@model IEnumerable<WestBlog.Models.Post>
@{
    ViewBag.Title = "Index";
}

		<!-- HERO -->
<section id="hero" class="module-hero module-parallax module-overlay-dark-1 js-fullheight" data-background="/Images/hero-maroonBells.png">

    <!-- HERO TEXT -->
    <div class="hero-caption">
        <div class="hero-text hero-t-align">
            <h1 class="hero-title m-t-70 m-b-0 ">Words from the West</h1>
            <h3 class="hero-subtitle m-b-20">chronicling the adventures of an emerging programmer</h3>
        </div>
    </div>
    <!-- /HERO TEXT -->

</section>
<!-- /HERO -->
<main>
        <section class="container view-content with-hero">
            @*@Html.Raw(Model.FilterClass)*@
            <div class="sidebar pull-right">
                <aside>
                    <h6>Categories</h6>
                    <ul id="filters" class="filters">
                        <li><a href="#" id="all" class="current" data-filter="*">All</a></li>
                        <li><a href="#" id="front-end" data-filter=".front-end">Front End</a></li>
                        <li><a href="#" id="server-side" data-filter=".server-side">Server Side</a></li>
                        <li><a href="#" id="mvc" data-filter=".mvc">MVC</a></li>
                        <li><a href="#" id="fun-find" data-filter=".fun-finds">Fun Finds</a></li>
                        <li><a href="#" id="none" data-filter=".none"></a></li>
                    </ul>
                </aside>
            </div>
            @{ var i = 0;}

            <div id="works-grid" class="works-grid works-grid-gutter works-grid-dark">
                <!-- POST -->
                


                @foreach (var post in Model)
                {
                    if (i % 3 == 0)
                    { 
                        @:<div class="row">
                            }
                    @*@(post.Published?"":"hide")*@
                    <article class="post post-preview col-sm-3 @Html.Raw(post.FilterClass)">
                        <div class="post-thumbnail">
                            @if (post.MediaURL.IsEmpty())
                            {
                                @:<img src="../Images/hero-maroonBells.png" alt="Maroon Bells Wilderness class" class="crop" />
                                }
                            else {
                                @:<img src="@Html.Raw(post.MediaURL)" alt="" class="crop">
                                }
                        </div>
                        <div class="post-header">

                            <h2 class="post-title"><a href="@Url.Action("Details", new { slug = post.Slug })">@post.Title</a></h2>
                            <h4 class="category">@Html.Raw(post.Category)</h4>
                            <h6>@Html.Raw(post.Created.DateTime.ToLongDateString())</h6>
                            <p>@Html.Raw(post.Created.DateTime.ToShortTimeString())</p>
                        </div>
                        <div class="post-content preview">
                            <p>@Html.Raw(post.Body)</p>
                        </div>
                        <div class="post-links">
                            <a href="@Url.Action("Details", new { slug = post.Slug })"><span>Read More &rarr;</span></a>
                            <!--Shows {included} only to proper authorization level-->
                            @if (User.IsInRole("Admin")) //User.Identity.IsAuthenticated for logged in
                            {
                                <div>
                                    @Html.ActionLink("Edit", "Edit", new { id = post.Id })
                                    @Html.ActionLink("Delete", "Delete", new { id = post.Id })
                                </div>
                            }
                        </div>
                    </article>
                        if (i % 3 == 2)
                        {
                            @:</div>

                        }
                        i++;
                }
                <!-- /POST -->
            </div>

</section>



                            <p>
                                @Html.ActionLink("Create New", "Create")
                            </p>
</main>